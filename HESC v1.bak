EESchema Schematic File Version 4
LIBS:HESC v1-cache
EELAYER 29 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 6
Title "HESC V1"
Date "14.7.2019"
Rev "init"
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Sheet
S 4200 2800 1350 2150
U 5CA11DF8
F0 "mcu" 50
F1 "Hesc.sch" 50
F2 "PWM_U_HIGH" I L 4200 2850 50 
F3 "PWM_U_LOW" I L 4200 2950 50 
F4 "PWM_V_HIGH" I L 4200 3300 50 
F5 "PWM_V_LOW" I L 4200 3400 50 
F6 "PWM_W_HIGH" I L 4200 3750 50 
F7 "PWM_W_LOW" I L 4200 3850 50 
F8 "ISENSE_U" I L 4200 3150 50 
F9 "ISENSE_V" I L 4200 3600 50 
F10 "ISENSE_W" I L 4200 4050 50 
F11 "USENSE_U" I L 4200 3050 50 
F12 "USENSE_V" I L 4200 3500 50 
F13 "USENSE_W" I L 4200 3950 50 
F14 "USENSE" I L 4200 4600 50 
F15 "DISABLE" I L 4200 4200 50 
F16 "TEMP" I L 4200 4800 50 
F17 "USB_DM" I R 5550 2850 50 
F18 "USB_DP" I R 5550 2950 50 
F19 "SWDIO" I R 5550 3050 50 
F20 "SWCLK" I R 5550 3150 50 
F21 "TEMP_MOTOR" I R 5550 4400 50 
F22 "ADC15" I R 5550 4500 50 
F23 "HALL_U" I R 5550 4100 50 
F24 "HALL_V" I R 5550 4200 50 
F25 "HALL_W" I R 5550 4300 50 
F26 "RC_PWM" I R 5550 3950 50 
F27 "CAN_RX" I R 5550 3350 50 
F28 "CAN_TX" I R 5550 3450 50 
F29 "TX_SCL_MOSI" I R 5550 3550 50 
F30 "MISO_ADC_EXT2" I R 5550 3750 50 
F31 "SCK_ADC_EXT" I R 5550 3850 50 
F32 "RX_SDA_NSS" I R 5550 3650 50 
F33 "NRST" I R 5550 3250 50 
F34 "oc_fault" I L 4200 4400 59 
F35 "oc_faultclr" I L 4200 4500 51 
$EndSheet
Wire Wire Line
	4200 4050 3800 4050
$Sheet
S 5950 2800 1050 2150
U 5D184511
F0 "io" 50
F1 "Hesc io.sch" 50
F2 "CAN_TX" I L 5950 3450 50 
F3 "CAN_RX" I L 5950 3350 50 
F4 "NRST" I L 5950 3250 50 
F5 "SWDIO" I L 5950 3050 50 
F6 "SWCLK" I L 5950 3150 50 
F7 "RC_PWM" I L 5950 3950 50 
F8 "USB_DP" I L 5950 2950 50 
F9 "USB_DM" I L 5950 2850 50 
F10 "THROTTLE1" I L 5950 3850 50 
F11 "THROTTLE2" I L 5950 3750 50 
F12 "RX" I L 5950 3650 50 
F13 "TX" I L 5950 3550 50 
F14 "MOTOR_TEMP" I L 5950 4400 50 
F15 "HALL_U" I L 5950 4100 50 
F16 "HALL_V" I L 5950 4200 50 
F17 "HALL_W" I L 5950 4300 50 
F18 "IGNITION" I R 7000 2900 50 
$EndSheet
$Comp
L power:GNDD #PWR?
U 1 1 5CEB7446
P 9050 2250
AR Path="/5CA11DF8/5CEB7446" Ref="#PWR?"  Part="1" 
AR Path="/5CEB7446" Ref="#PWR06"  Part="1" 
F 0 "#PWR06" H 9050 2000 50  0001 C CNN
F 1 "GNDD" H 9054 2095 50  0000 C CNN
F 2 "" H 9050 2250 50  0001 C CNN
F 3 "" H 9050 2250 50  0001 C CNN
	1    9050 2250
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5CEB7455
P 8750 2250
AR Path="/5CA11DF8/5CEB7455" Ref="#PWR?"  Part="1" 
AR Path="/5CEB7455" Ref="#PWR02"  Part="1" 
F 0 "#PWR02" H 8750 2000 50  0001 C CNN
F 1 "GND" H 8755 2077 50  0000 C CNN
F 2 "" H 8750 2250 50  0001 C CNN
F 3 "" H 8750 2250 50  0001 C CNN
	1    8750 2250
	1    0    0    -1  
$EndComp
$Comp
L power:GNDS #PWR01
U 1 1 5DC2074C
P 8450 2250
F 0 "#PWR01" H 8450 2000 50  0001 C CNN
F 1 "GNDS" H 8455 2077 50  0000 C CNN
F 2 "" H 8450 2250 50  0001 C CNN
F 3 "" H 8450 2250 50  0001 C CNN
	1    8450 2250
	1    0    0    -1  
$EndComp
Wire Wire Line
	5550 2850 5950 2850
Wire Wire Line
	5950 2950 5550 2950
Wire Wire Line
	5550 3050 5950 3050
Wire Wire Line
	5950 3150 5550 3150
Wire Wire Line
	5550 3250 5950 3250
Wire Wire Line
	5950 3350 5550 3350
Wire Wire Line
	5550 3450 5950 3450
Wire Wire Line
	5950 3550 5550 3550
Wire Wire Line
	5550 3650 5950 3650
Wire Wire Line
	5950 3750 5550 3750
Wire Wire Line
	5550 3850 5950 3850
Wire Wire Line
	5950 3950 5550 3950
Wire Wire Line
	5550 4100 5950 4100
Wire Wire Line
	5950 4200 5550 4200
Wire Wire Line
	5950 4300 5550 4300
Wire Wire Line
	5950 4400 5550 4400
$Sheet
S 3100 2200 3900 350 
U 5DBE359C
F0 "pwr mng" 50
F1 "Hesc pwr mng.sch" 50
F2 "PG" I R 7000 2300 50 
F3 "RUN" I R 7000 2400 50 
$EndSheet
Wire Wire Line
	7000 2400 7150 2400
Wire Wire Line
	7150 2400 7150 2900
Wire Wire Line
	7150 2900 7000 2900
$Comp
L power:GNDA #PWR?
U 1 1 5CEB744C
P 9350 2250
AR Path="/5CA11DF8/5CEB744C" Ref="#PWR?"  Part="1" 
AR Path="/5CEB744C" Ref="#PWR07"  Part="1" 
F 0 "#PWR07" H 9350 2000 50  0001 C CNN
F 1 "GNDA" H 9355 2077 50  0000 C CNN
F 2 "" H 9350 2250 50  0001 C CNN
F 3 "" H 9350 2250 50  0001 C CNN
	1    9350 2250
	1    0    0    -1  
$EndComp
Wire Wire Line
	9350 2250 9350 2150
Wire Wire Line
	9350 2150 9050 2150
Wire Wire Line
	8750 2150 8750 2250
Wire Wire Line
	9050 2250 9050 2150
Connection ~ 9050 2150
Wire Wire Line
	9050 2150 8750 2150
Wire Wire Line
	8450 2250 8450 2150
Wire Wire Line
	8450 2150 8750 2150
Connection ~ 8750 2150
$Sheet
S 2800 2800 750  2150
U 5FF8466C
F0 "supervisor" 39
F1 "Hesc-supervisor.sch" 39
F2 "PWM_UT" I R 3550 2850 39 
F3 "PWM_VT" I R 3550 3300 39 
F4 "PWM_WT" I R 3550 3750 39 
F5 "PWM_WB" I R 3550 3850 39 
F6 "PWM_GUT" O L 2800 2850 39 
F7 "PWM_GUB" O L 2800 2950 39 
F8 "PWM_GVT" O L 2800 3300 39 
F9 "PWM_GVB" O L 2800 3400 39 
F10 "PWM_GWT" O L 2800 3750 39 
F11 "PWM_GWB" O L 2800 3850 39 
F12 "~OC_Fault_U" I L 2800 4200 39 
F13 "OC_Fault" O R 3550 4400 39 
F14 "~OC_Fault_V" I L 2800 4100 39 
F15 "~OC_Fault_W" I L 2800 4300 39 
F16 "CLR_OC_Fault" I R 3550 4500 39 
F17 "disable" I L 2800 4450 39 
F18 "PWM_VB" I R 3550 3400 39 
F19 "PWM_UB" I R 3550 2950 39 
$EndSheet
Wire Wire Line
	3550 2850 4200 2850
Wire Wire Line
	3550 2950 4200 2950
Wire Wire Line
	3550 3300 4200 3300
Wire Wire Line
	3550 3400 4200 3400
Wire Wire Line
	3550 3750 4200 3750
Wire Wire Line
	3550 3850 4200 3850
Wire Wire Line
	2800 4450 2750 4450
Wire Wire Line
	3550 4400 4200 4400
$Sheet
S 1750 5350 1450 1900
U 5FFEA8F2
F0 "current sense" 39
F1 "current sensing.sch" 39
F2 "i_phaseU-" I L 1750 5500 80 
F3 "i_phaseU+" I L 1750 5700 80 
F4 "~OC_FAULT" I R 3200 7000 80 
F5 "i_phaseV-" I L 1750 5950 80 
F6 "i_phaseV+" I L 1750 6150 80 
F7 "i_phaseW-" I L 1750 6400 80 
F8 "i_phaseW+" I L 1750 6600 80 
F9 "i_phaseV" I R 3200 5900 80 
F10 "i_phaseW" I R 3200 6200 80 
F11 "i_phaseU" I R 3200 5650 80 
$EndSheet
Wire Wire Line
	3200 7000 3400 7000
Wire Wire Line
	3400 7000 3400 5250
Wire Wire Line
	3400 5250 2700 5250
Wire Wire Line
	2700 5250 2700 4300
Wire Wire Line
	2700 4300 2800 4300
Wire Wire Line
	2700 4300 2700 4200
Wire Wire Line
	2700 4100 2800 4100
Connection ~ 2700 4300
Wire Wire Line
	2700 4200 2800 4200
Connection ~ 2700 4200
Wire Wire Line
	2700 4200 2700 4100
Wire Wire Line
	3200 5650 3650 5650
Wire Wire Line
	3650 5650 3650 3150
Wire Wire Line
	3650 3150 4200 3150
Wire Wire Line
	3700 3600 3700 5900
Wire Wire Line
	3700 5900 3200 5900
Wire Wire Line
	3700 3600 4200 3600
Wire Wire Line
	3200 6200 3800 6200
Wire Wire Line
	3800 6200 3800 4050
Wire Wire Line
	3550 4500 4200 4500
$Comp
L Connector:Conn_01x04_Male J15
U 1 1 6002AD4E
P 650 5550
F 0 "J15" H 600 5850 50  0000 C CNN
F 1 "Current sensor U" H 900 5750 50  0000 C CNN
F 2 "Connector_JST:JST_EH_B4B-EH-A_1x04_P2.50mm_Vertical" H 650 5550 50  0001 C CNN
F 3 "~" H 650 5550 50  0001 C CNN
	1    650  5550
	1    0    0    -1  
$EndComp
$Comp
L Connector:Conn_01x04_Male J18
U 1 1 6002C425
P 650 6200
F 0 "J18" H 600 6500 50  0000 C CNN
F 1 "Current sensor V" H 850 6400 50  0000 C CNN
F 2 "Connector_JST:JST_EH_B4B-EH-A_1x04_P2.50mm_Vertical" H 650 6200 50  0001 C CNN
F 3 "~" H 650 6200 50  0001 C CNN
	1    650  6200
	1    0    0    -1  
$EndComp
$Comp
L Connector:Conn_01x04_Male J19
U 1 1 6002C8E2
P 600 6900
F 0 "J19" H 550 7200 50  0000 C CNN
F 1 "Current sensor W" H 850 7100 50  0000 C CNN
F 2 "Connector_JST:JST_EH_B4B-EH-A_1x04_P2.50mm_Vertical" H 600 6900 50  0001 C CNN
F 3 "~" H 600 6900 50  0001 C CNN
	1    600  6900
	1    0    0    -1  
$EndComp
Wire Wire Line
	850  6100 1400 6100
Wire Wire Line
	1400 6100 1400 5950
Wire Wire Line
	1400 5950 1750 5950
Wire Wire Line
	850  6200 1500 6200
Wire Wire Line
	1500 6200 1500 6150
Wire Wire Line
	1500 6150 1750 6150
Wire Wire Line
	1300 6400 1750 6400
Wire Wire Line
	1400 6600 1750 6600
Wire Wire Line
	850  5450 1500 5450
Wire Wire Line
	1500 5450 1500 5500
Wire Wire Line
	1500 5500 1750 5500
Wire Wire Line
	850  5550 1500 5550
Wire Wire Line
	1500 5550 1500 5700
Wire Wire Line
	1500 5700 1750 5700
$Comp
L power:+5V #PWR045
U 1 1 6004537C
P 800 7100
F 0 "#PWR045" H 800 6950 50  0001 C CNN
F 1 "+5V" H 815 7273 50  0000 C CNN
F 2 "" H 800 7100 50  0001 C CNN
F 3 "" H 800 7100 50  0001 C CNN
	1    800  7100
	-1   0    0    1   
$EndComp
$Comp
L power:+5V #PWR042
U 1 1 60045673
P 850 6400
F 0 "#PWR042" H 850 6250 50  0001 C CNN
F 1 "+5V" H 865 6573 50  0000 C CNN
F 2 "" H 850 6400 50  0001 C CNN
F 3 "" H 850 6400 50  0001 C CNN
	1    850  6400
	-1   0    0    1   
$EndComp
$Comp
L power:+5V #PWR05
U 1 1 60045A9F
P 850 5750
F 0 "#PWR05" H 850 5600 50  0001 C CNN
F 1 "+5V" H 865 5923 50  0000 C CNN
F 2 "" H 850 5750 50  0001 C CNN
F 3 "" H 850 5750 50  0001 C CNN
	1    850  5750
	-1   0    0    1   
$EndComp
Wire Wire Line
	1300 6800 800  6800
Wire Wire Line
	1300 6400 1300 6800
Wire Wire Line
	1400 6900 800  6900
Wire Wire Line
	1400 6600 1400 6900
$Comp
L power:GND #PWR044
U 1 1 6004E916
P 1150 7000
F 0 "#PWR044" H 1150 6750 50  0001 C CNN
F 1 "GND" V 1155 6872 50  0000 R CNN
F 2 "" H 1150 7000 50  0001 C CNN
F 3 "" H 1150 7000 50  0001 C CNN
	1    1150 7000
	0    -1   -1   0   
$EndComp
Wire Wire Line
	1150 7000 800  7000
$Comp
L power:GND #PWR041
U 1 1 60052BA0
P 1100 6300
F 0 "#PWR041" H 1100 6050 50  0001 C CNN
F 1 "GND" V 1105 6172 50  0000 R CNN
F 2 "" H 1100 6300 50  0001 C CNN
F 3 "" H 1100 6300 50  0001 C CNN
	1    1100 6300
	0    -1   -1   0   
$EndComp
$Comp
L power:GND #PWR04
U 1 1 60052F8E
P 1100 5650
F 0 "#PWR04" H 1100 5400 50  0001 C CNN
F 1 "GND" V 1105 5522 50  0000 R CNN
F 2 "" H 1100 5650 50  0001 C CNN
F 3 "" H 1100 5650 50  0001 C CNN
	1    1100 5650
	0    -1   -1   0   
$EndComp
Wire Wire Line
	1100 5650 850  5650
Wire Wire Line
	1100 6300 850  6300
Wire Wire Line
	4200 4200 3900 4200
Wire Wire Line
	3900 4200 3900 5200
Wire Wire Line
	3900 5200 2750 5200
Wire Wire Line
	2750 4450 2750 5200
$Comp
L Connector_Generic:Conn_02x03_Top_Bottom J1
U 1 1 601427AC
P 1550 3550
F 0 "J1" H 1600 3867 50  0000 C CNN
F 1 "Conn_02x03_Top_Bottom" H 1600 3776 50  0000 C CNN
F 2 "Connector_PinHeader_2.54mm:PinHeader_2x03_P2.54mm_Vertical" H 1550 3550 50  0001 C CNN
F 3 "~" H 1550 3550 50  0001 C CNN
	1    1550 3550
	-1   0    0    -1  
$EndComp
Wire Wire Line
	1800 3050 1800 3450
Wire Wire Line
	1800 3450 1750 3450
Wire Wire Line
	1800 3050 4200 3050
Wire Wire Line
	1850 3950 4200 3950
Wire Wire Line
	2450 4600 4200 4600
Wire Wire Line
	1850 3950 1850 3550
Wire Wire Line
	1750 3550 1850 3550
Wire Wire Line
	1750 4050 2450 4050
Wire Wire Line
	2450 4050 2450 4600
Wire Wire Line
	1000 4800 1000 3450
Wire Wire Line
	1000 3450 1250 3450
Wire Wire Line
	1000 4800 4200 4800
Wire Wire Line
	1750 4050 1750 3800
Wire Wire Line
	1750 3800 1250 3800
Wire Wire Line
	1250 3800 1250 3650
Wire Wire Line
	1750 3650 3500 3650
Wire Wire Line
	3500 3650 3500 3500
Wire Wire Line
	3500 3500 4200 3500
$Comp
L power:GNDA #PWR0123
U 1 1 601B579D
P 1100 3550
F 0 "#PWR0123" H 1100 3300 50  0001 C CNN
F 1 "GNDA" H 1105 3377 50  0000 C CNN
F 2 "" H 1100 3550 50  0001 C CNN
F 3 "" H 1100 3550 50  0001 C CNN
	1    1100 3550
	1    0    0    -1  
$EndComp
Wire Wire Line
	1100 3550 1250 3550
$Comp
L Connector_Generic:Conn_02x07_Top_Bottom J2
U 1 1 6014345E
P 1250 2000
F 0 "J2" H 1300 2517 50  0000 C CNN
F 1 "Conn_02x07_Top_Bottom" H 1300 2426 50  0000 C CNN
F 2 "Connector_PinHeader_2.54mm:PinHeader_2x07_P2.54mm_Vertical" H 1250 2000 50  0001 C CNN
F 3 "~" H 1250 2000 50  0001 C CNN
	1    1250 2000
	-1   0    0    -1  
$EndComp
Text Label 2600 2850 0    40   ~ 0
U_T
Wire Wire Line
	2600 2850 2800 2850
Text Label 2600 2950 0    40   ~ 0
U_B
Wire Wire Line
	2600 2950 2800 2950
Text Label 2600 3300 0    40   ~ 0
V_T
Wire Wire Line
	2600 3300 2800 3300
Text Label 2600 3400 0    40   ~ 0
V_B
Wire Wire Line
	2600 3400 2800 3400
Text Label 2600 3750 0    40   ~ 0
W_T
Text Label 2600 3850 0    40   ~ 0
W_B
Wire Wire Line
	2600 3750 2800 3750
Wire Wire Line
	2600 3850 2800 3850
Text Label 2550 4450 0    40   ~ 0
DISABLE
Wire Wire Line
	2550 4450 2750 4450
Connection ~ 2750 4450
Text Label 1550 1800 0    40   ~ 0
U_T
Wire Wire Line
	1550 1800 1450 1800
Text Label 1550 2000 0    40   ~ 0
U_B
Wire Wire Line
	1550 2000 1450 2000
Text Label 1550 2200 0    40   ~ 0
V_T
Text Label 800  1700 0    40   ~ 0
V_B
Text Label 800  1900 0    40   ~ 0
W_T
Text Label 800  2100 0    40   ~ 0
W_B
Text Label 650  2300 0    40   ~ 0
DISABLE
Wire Wire Line
	650  2300 950  2300
Wire Wire Line
	800  2100 950  2100
Wire Wire Line
	800  1900 950  1900
Wire Wire Line
	800  1700 950  1700
Wire Wire Line
	1550 2200 1450 2200
$Comp
L power:+12V #PWR?
U 1 1 6027D517
P 1850 1900
F 0 "#PWR?" H 1850 1750 50  0001 C CNN
F 1 "+12V" V 1865 2028 50  0000 L CNN
F 2 "" H 1850 1900 50  0001 C CNN
F 3 "" H 1850 1900 50  0001 C CNN
	1    1850 1900
	0    1    1    0   
$EndComp
Wire Wire Line
	1450 1700 1850 1700
Wire Wire Line
	1850 1700 1850 1900
Wire Wire Line
	1450 2100 1850 2100
Wire Wire Line
	1850 2100 1850 1900
Connection ~ 1850 1900
Wire Wire Line
	1450 1900 1850 1900
$Comp
L power:+3.3V #PWR?
U 1 1 6028F6F9
P 1850 2350
F 0 "#PWR?" H 1850 2200 50  0001 C CNN
F 1 "+3.3V" V 1865 2478 50  0000 L CNN
F 2 "" H 1850 2350 50  0001 C CNN
F 3 "" H 1850 2350 50  0001 C CNN
	1    1850 2350
	0    1    1    0   
$EndComp
Wire Wire Line
	1850 2350 1500 2350
Wire Wire Line
	1500 2350 1500 2300
Wire Wire Line
	1500 2300 1450 2300
$Comp
L power:GNDD #PWR?
U 1 1 60295852
P 700 2000
AR Path="/5CA11DF8/60295852" Ref="#PWR?"  Part="1" 
AR Path="/60295852" Ref="#PWR?"  Part="1" 
F 0 "#PWR?" H 700 1750 50  0001 C CNN
F 1 "GNDD" H 704 1845 50  0000 C CNN
F 2 "" H 700 2000 50  0001 C CNN
F 3 "" H 700 2000 50  0001 C CNN
	1    700  2000
	0    1    1    0   
$EndComp
Wire Wire Line
	950  1800 700  1800
Wire Wire Line
	700  1800 700  2000
Wire Wire Line
	700  2000 700  2200
Wire Wire Line
	700  2200 950  2200
Connection ~ 700  2000
Wire Wire Line
	700  2000 950  2000
$EndSCHEMATC
